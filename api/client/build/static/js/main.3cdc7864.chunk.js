(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{186:function(e,t,n){e.exports=n.p+"static/media/landingPage.0e253562.jpeg"},210:function(e,t,n){e.exports=n(366)},215:function(e,t,n){},366:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(40),c=n.n(o),l=(n(215),n(42)),u=n(22),i=n(49),s=(n(220),n(382)),d="LOGIN_START",m="FETCH_PHOTOS_START",h="FETCH_PHOTOS_SCROLL",p="SAVE_PHOTOS_START",f="FETCH_COLLECTION_START",g=function(e){return{type:"LOGIN_OKAY",userInfo:e}},b=Object(i.g)(Object(u.b)((function(e){return{isAuth:e.auth.isAuth}}),(function(e){return{logout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=e.location,n=e.isAuth;return r.a.createElement(s.a,{style:{marginBottom:"0"},size:"large",stackable:!0,position:"right"},r.a.createElement(s.a.Item,null,r.a.createElement("img",{alt:"app logo",src:"https://react.semantic-ui.com/logo.png"})),r.a.createElement(s.a.Menu,{position:"right"},n?null:r.a.createElement(s.a.Item,{name:"login",as:l.b,to:"/login",active:"/login"===t.pathname},"Login"),n?r.a.createElement(s.a.Item,{onClick:function(){window.confirm("Are you logging out?")&&e.logout()},name:"logout"},"Logout"):null,n?r.a.createElement(s.a.Item,{name:"dashboard",as:l.b,to:"/dashboard",active:"/dashboard"===t.pathname},"Dashboard"):null,n?r.a.createElement(s.a.Item,{name:"photos",as:l.b,to:"/photos",active:"/photos"===t.pathname},"Photos"):null))}))),O=n(383),v=n(384),E=n(199),j=n(375),k=function(e){return{type:"FETCH_COLLECTION_OKAY",data:e}},y=function(e){return{type:m,keyword:e}},w=function(e){return{type:"FETCH_PHOTOS_OKAY",data:e}},x=function(e){return{type:"FETCH_PHOTOS_SCROLL_OKAY",data:e}},C=Object(u.b)((function(e){return{collection:e.data.collection}}),(function(e){return{getCollection:function(){return e({type:f})}}}))((function(e){var t=e.getCollection,n=e.collection;Object(a.useEffect)((function(){t()}),[]);var o=n.map((function(e,t){return r.a.createElement(O.a.Column,{key:t},r.a.createElement(v.a,null,r.a.createElement(E.a,{src:e.pictureUrl})))}));return r.a.createElement("div",{style:{marginTop:"2rem"}},r.a.createElement(j.a,null,r.a.createElement("h1",{style:{textAlign:"center"}},"Saved Collection"),0===n.length?r.a.createElement("h2",{style:{textAlign:"center",color:"red"}},"You have no photos saved"):r.a.createElement("div",{className:"ui stackable two column grid"},o)))})),I=n(56),A=n(376),S=n(57),T=Object(u.b)(null,(function(e){return{fetchPhotos:function(t){return e(y(t))}}}))((function(e){var t=e.fetchPhotos,n=Object(a.useState)(""),o=Object(I.a)(n,2),c=o[0],l=o[1];return r.a.createElement(A.a,{icon:r.a.createElement(S.a,{onClick:function(e){t(c)},name:"search",inverted:!0,circular:!0,link:!0}),onChange:function(e){l(e.target.value)},value:c,placeholder:"Search..."})})),P=n(33),_=n(185),L=n(367),H=function(){return{type:"SAVE_PHOTOS_OKAY"}},Y=n(380),K=function(e){var t=e.imageUrl,n=e.id,a=e.showCheck,o=e.savePhoto;return r.a.createElement(Y.a,{style:{margin:"0 auto"}},r.a.createElement(E.a,{src:t,wrapped:!0,ui:!1}),r.a.createElement(Y.a.Content,null,r.a.createElement(Y.a.Header,null,"Photo id: ",n),r.a.createElement(L.a,{onClick:function(){return o(t,n)},basic:!0,color:"green"},"Save Photo"),a?r.a.createElement(S.a,{style:{marginLeft:"2rem"},name:"checkmark"}):null))},F=n(381),N=n(377),R=function(){return r.a.createElement("div",null,r.a.createElement(F.a,{active:!0,inverted:!0},r.a.createElement(N.a,{size:"large"})))},U=Object(u.b)((function(e){return{photoData:e.data.data,keywords:e.data.keywords,loading:e.data.loading}}),(function(e){return{scrollMorePhotos:function(t){return e(function(e){return{type:h,keyword:e}}(t))},save:function(t){return e(function(e){return{type:p,photos:e}}(t))}}}))((function(e){var t=e.photoData,n=e.keywords,o=e.scrollMorePhotos,c=e.save,l=e.loading,u=Object(a.useState)([]),i=Object(I.a)(u,2),s=i[0],d=i[1],m=function(e,t){if(-1===s.findIndex((function(e){return e.id===t})))d([].concat(Object(P.a)(s),[{imageUrl:e,id:t}]));else{var n=[];n=(n=Object(P.a)(s)).filter((function(e){return e.id!==t})),d(Object(P.a)(n))}};return r.a.createElement("div",{style:{marginTop:"3rem"}},0!==s.length?r.a.createElement(O.a,null,r.a.createElement(O.a.Column,{textAlign:"center"},r.a.createElement(L.a,{onClick:function(){0!==s.length?(c(s),d([])):alert("No photos selected")},animated:"vertical"},r.a.createElement(L.a.Content,{hidden:!0},"Save"),r.a.createElement(L.a.Content,{visible:!0},r.a.createElement(S.a,{size:"large",name:"save outline"}))))):null,r.a.createElement(_.a,{dataLength:t.length,next:function(){0!==n.length&&o(n[n.length-1])},hasMore:!0,loader:l?r.a.createElement(R,null):null,className:"ui stackable two column grid"},t.map((function(e,t){var n=!1;return s.some((function(t){return t.id===e.photoId}))&&(n=!0),r.a.createElement(O.a.Column,{key:e.photoId+t},r.a.createElement(K,{showCheck:n,savePhoto:m,id:e.photoId,imageUrl:e.photoUrl}))}))))})),z=n(76),D=Object(u.b)((function(e){return{keywords:e.auth.keywords}}),(function(e){return{fetchPhotos:function(t){return e(y(t))}}}))((function(e){var t=e.keywords,n=e.fetchPhotos;return r.a.createElement("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"center",alignItems:"center"}},t.map((function(e){return r.a.createElement(z.a,{style:{cursor:"pointer"},onClick:function(){return n(e)},color:"blue",key:e},e)})))})),G=Object(u.b)((function(e){return{loading:e.data.loading}}))((function(e){var t=e.loading;return r.a.createElement(j.a,null,r.a.createElement("div",{style:{marginTop:"2rem",display:"flex",justifyContent:"center"}},r.a.createElement(T,null)),r.a.createElement("div",null,r.a.createElement(D,null)),t?r.a.createElement(R,null):null,r.a.createElement("div",{style:{marginTop:"2rem",minHeight:"700px"}},r.a.createElement(U,null)))})),B=n(186),M=n.n(B),V=function(e){var t={backgroundImage:"url(".concat(M.a,")"),minHeight:"100vh",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return r.a.createElement("div",{style:t},r.a.createElement("h1",{style:{textAlign:"center",transform:"translateY(4.5rem)",color:"green",fontSize:"4rem"}},"Photo Paradise"))},J=n(100),W=n(24),$=n(378),q=Object(u.b)((function(e){return{isAuth:e.auth.isAuth}}),(function(e){return{loginStart:function(t){return e(function(e){return{type:d,userInfo:e}}(t))}}}))((function(e){var t=e.isAuth,n=e.loginStart,o=function(){var e=Object(a.useState)({email:"",password:""}),t=Object(I.a)(e,2),n=t[0],r=t[1];return[n,function(e){r(Object(W.a)({},n,Object(J.a)({},e.target.name,e.target.value)))},function(){r(Object(W.a)({},n,{email:"",password:""}))}]}(),c=Object(I.a)(o,3),l=c[0],u=c[1],s=c[2];return t?r.a.createElement(i.a,{to:"/dashboard"}):r.a.createElement("div",{style:{height:"60vh",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement($.a,{onSubmit:function(e){e.preventDefault(),n(l),s()}},r.a.createElement($.a.Group,null,r.a.createElement($.a.Input,{placeholder:"Email",name:"email",label:"Email",value:l.email,onChange:u}),r.a.createElement($.a.Input,{placeholder:"Password",label:"Password",type:"password",name:"password",value:l.password,onChange:u})),r.a.createElement($.a.Button,{content:"Submit"})))})),Q=n(198),X=Object(u.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(e){var t=e.component,n=Object(Q.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return n.isAuth?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))}));var Z=function(){return r.a.createElement("main",null,r.a.createElement(b,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:V}),r.a.createElement(i.b,{path:"/login",component:q}),r.a.createElement(X,{path:"/photos",component:G}),r.a.createElement(X,{path:"/dashboard",component:C})))},ee=n(44),te=n(197),ne={isAuth:!1,userInfo:null,loading:!1,error:"",keywords:[]},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return localStorage.removeItem("dockerPhotos"),Object(W.a)({},e,{isAuth:!1,userInfo:null,keywords:[]});case d:return Object(W.a)({},e,{loading:!0});case"LOGIN_OKAY":return Object(W.a)({},e,{loading:!1,isAuth:!0,keywords:Object(P.a)(t.userInfo.searchResults),userInfo:Object(W.a)({},e.userInfo,{},t.userInfo)});default:return e}},re={keywords:[],data:[],collection:[],loading:!0,error:""},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return Object(W.a)({},e,{collection:[],data:[],keywords:[]});case f:case h:return Object(W.a)({},e,{loading:!0});case"FETCH_COLLECTION_OKAY":return Object(W.a)({},e,{loading:!1,collection:Object(P.a)(t.data)});case p:return Object(W.a)({},e,{loading:!0});case"SAVE_PHOTOS_OKAY":return Object(W.a)({},e,{loading:!1});case m:return Object(W.a)({},e,{keywords:[].concat(Object(P.a)(e.keywords),[t.keyword]),loading:!0});case"FETCH_PHOTOS_SCROLL_OKAY":return Object(W.a)({},e,{data:[].concat(Object(P.a)(e.data),Object(P.a)(t.data)),loading:!1});case"FETCH_PHOTOS_OKAY":return Object(W.a)({},e,{data:Object(P.a)(t.data),loading:!1});default:return e}},ce=n(25),le=n.n(ce),ue=n(26),ie=n(69),se=n.n(ie),de={login:"http://localhost:3050/api/auth/login",loadData:"http://localhost:3050/api/data/photos?keywords=",saveData:"http://localhost:3050/api/data/photos",collection:"http://localhost:3050/api/data/collections"},me=le.a.mark(pe),he=le.a.mark(fe);function pe(e){var t,n,a,r,o,c;return le.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.userInfo,n=t.email,a=t.password,r=null,o=null,l.prev=3,l.next=6,se.a.post(de.login,{email:n,password:a});case 6:return c=l.sent,r=c.data.token,o=c.data.userInfo,l.next=11,localStorage.setItem("dockerPhotos",r);case 11:return l.next=13,Object(ue.b)(g(o));case 13:l.next=18;break;case 15:l.prev=15,l.t0=l.catch(3),console.log(l.t0);case 18:case"end":return l.stop()}}),me,null,[[3,15]])}function fe(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.d)(d,pe);case 2:case"end":return e.stop()}}),he)}var ge=le.a.mark(je),be=le.a.mark(ke),Oe=le.a.mark(ye),ve=le.a.mark(we),Ee=function(e){return e.auth.userInfo.id};function je(e){var t,n,a;return le.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,localStorage.getItem("dockerPhotos");case 2:return t=r.sent,r.prev=3,r.next=6,se()({headers:{Authorization:"bearer ".concat(t)},method:"get",url:"".concat(de.loadData).concat(e.keyword)});case 6:if(n=r.sent,a=n.data.result.map((function(e){return{photoId:e.id,photoUrl:e.urls.regular}})),e.type!==m){r.next=13;break}return r.next=11,Object(ue.b)(w(a));case 11:r.next=15;break;case 13:return r.next=15,Object(ue.b)(x(a));case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(3),console.log(r.t0.message);case 20:case"end":return r.stop()}}),ge,null,[[3,17]])}function ke(e){var t,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("dockerPhotos");case 2:return t=e.sent,e.prev=3,e.next=6,se()({headers:{Authorization:"bearer ".concat(t)},method:"get",url:"".concat(de.collection)});case 6:return n=e.sent,e.next=9,Object(ue.b)(k(n.data.data));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}}),be,null,[[3,11]])}function ye(e){var t,n,a;return le.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(ue.c)(Ee);case 2:return t=r.sent,n=e.photos,r.next=6,localStorage.getItem("dockerPhotos");case 6:return a=r.sent,r.prev=7,r.next=10,se()({headers:{Authorization:"bearer ".concat(a)},method:"post",url:"".concat(de.saveData),data:{photos:n,id:t}});case 10:return r.sent,r.next=13,Object(ue.b)(H());case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(7),console.log(r.t0);case 18:case"end":return r.stop()}}),Oe,null,[[7,15]])}function we(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.d)(m,je);case 2:return e.next=4,Object(ue.d)(h,je);case 4:return e.next=6,Object(ue.d)(p,ye);case 6:return e.next=8,Object(ue.d)(f,ke);case 8:case"end":return e.stop()}}),ve)}var xe=le.a.mark(Ce);function Ce(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.a)([fe(),we()]);case 2:case"end":return e.stop()}}),xe)}var Ie=ee.d,Ae=Object(ee.c)({auth:ae,data:oe}),Se=Object(te.a)(),Te=Object(ee.e)(Ae,Ie(Object(ee.a)(Se)));Se.run(Ce);var Pe=Te;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _e=r.a.createElement(u.a,{store:Pe},r.a.createElement(l.a,null,r.a.createElement(Z,null)));c.a.render(_e,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[210,1,2]]]);
//# sourceMappingURL=main.3cdc7864.chunk.js.map